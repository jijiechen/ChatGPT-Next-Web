(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6370],{658:function(e,t,s){"use strict";s.d(t,{Y:function(){return r}});var a=s(4963);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,a.lr)();if(void 0===e)return;let r=!1;t.forEach((s,a)=>{"function"==typeof e[a]&&(e[a](s),t.delete(a),r=!0)}),r&&s(t)}},8127:function(e,t,s){"use strict";s.r(t),s.d(t,{Chat:function(){return te},ChatActions:function(){return e5},PromptHints:function(){return e8},SessionConfigModel:function(){return e4}});var a,r,n,l,o,i,c,m,d,h,p,u,g,f,v,x,k,_,y,w,E,j,b,C,M,S,N,O,A,P,D=s(9268),Z=s(9357),H=s(6006),W=s(6254);function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var R=function(e){return W.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=W.createElement("defs",null,W.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,r||(r=W.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#send-white_svg__a"}))),W.createElement("g",{mask:"url(#send-white_svg__b)"},W.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 2)",d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z"}),W.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(8.003 6.117)",d:"M0 1.89 1.89 0"}))))};function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var K=function(e){return W.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=W.createElement("defs",null,W.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,l||(l=W.createElement("mask",{id:"brain_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#brain_svg__a"}))),W.createElement("g",{mask:"url(#brain_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var L=function(e){return W.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=W.createElement("defs",null,W.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,i||(i=W.createElement("mask",{id:"rename_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#rename_svg__a"}))),W.createElement("g",{mask:"url(#rename_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.775 1.3)",d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.317 4.13)",d:"m0 0 2.83 2.83"}))))};function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var V=function(e){return W.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c||(c=W.createElement("defs",null,W.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,m||(m=W.createElement("mask",{id:"share_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#share_svg__a"}))),W.createElement("g",{mask:"url(#share_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))};function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var Q=function(e){return W.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),d||(d=W.createElement("defs",null,W.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,h||(h=W.createElement("mask",{id:"return_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#return_svg__a"}))),W.createElement("g",{mask:"url(#return_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2.667)",d:"M2.33 0 0 2l2.33 2.33"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 4.667)",d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2"}))))},F=s(6011),X=s(359);function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var Y=function(e){return W.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),p||(p=W.createElement("defs",null,W.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,u||(u=W.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#prompt_svg__a"}))),W.createElement("g",{mask:"url(#prompt_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))},q=s(2095);function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var $=function(e){return W.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),g||(g=W.createElement("defs",null,W.createElement("path",{id:"max_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,f||(f=W.createElement("mask",{id:"max_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#max_svg__a"}))),W.createElement("g",{mask:"url(#max_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h3v3",transform:"translate(11 2)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(11 11)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3H0V0",transform:"translate(2 11)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h3",transform:"translate(2 2)"}))))};function ee(){return(ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var et=function(e){return W.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),v||(v=W.createElement("defs",null,W.createElement("path",{id:"min_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,x||(x=W.createElement("mask",{id:"min_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#min_svg__a"}))),W.createElement("g",{mask:"url(#min_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3h3",transform:"translate(10.667 2.333)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(2.333 2.333)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3V0H0",transform:"translate(2.333 10.667)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h2.97",transform:"translate(10.667 10.667)"}))))},es=s(1150);function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var er=function(e){return W.createElement("svg",ea({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),W.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),W.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),k||(k=W.createElement("g",null,W.createElement("mask",{id:"break_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#break_svg__a"})))),_||(_=W.createElement("defs",null,W.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function en(){return(en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var el=function(e){return W.createElement("svg",en({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),W.createElement("g",null,y||(y=W.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),W.createElement("g",{mask:"url(#chat-settings_svg__b)"},W.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),W.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),w||(w=W.createElement("defs",null,W.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var ei=function(e){return W.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),E||(E=W.createElement("defs",null,W.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,j||(j=W.createElement("mask",{id:"light_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#light_svg__a"}))),W.createElement("g",{mask:"url(#light_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(3.667 3.667)",d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 .333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(14 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 14)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(.333 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),W.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}))))};function ec(){return(ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var em=function(e){return W.createElement("svg",ec({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),b||(b=W.createElement("defs",null,W.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,C||(C=W.createElement("mask",{id:"dark_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#dark_svg__a"}))),W.createElement("g",{mask:"url(#dark_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z"}))))};function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var eh=function(e){return W.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),M||(M=W.createElement("defs",null,W.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,S||(S=W.createElement("mask",{id:"auto_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#auto_svg__a"}))),W.createElement("g",{mask:"url(#auto_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.667 5.333)",d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 9.333)",d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67"}))))};function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var eu=function(e){return W.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),N||(N=W.createElement("defs",null,W.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,O||(O=W.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#bottom_svg__a"}))),W.createElement("g",{mask:"url(#bottom_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};function eg(){return(eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var ef=function(e){return W.createElement("svg",eg({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),A||(A=W.createElement("defs",null,W.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),W.createElement("g",null,P||(P=W.createElement("mask",{id:"pause_svg__b",fill:"#fff"},W.createElement("use",{xlinkHref:"#pause_svg__a"}))),W.createElement("g",{mask:"url(#pause_svg__b)"},W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.333 6)",d:"M0 0v4"}),W.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.667 6)",d:"M0 0v4"}))))},ev=s(2220),ex=s(3514),ek=s(9234),e_=s.n(ek),ey=s(4046),ew=s(7598),eE=s(5262),ej=s(5911),eb=s(1034),eC=s.n(eb),eM=s(6551),eS=s.n(eM),eN=s(2356),eO=s(7005),eA=s(6819),eP=s(9913),eD=s(6646),eZ=s(3914),eH=s(658),eW=s(2121),eT=s(4956),eR=s.n(eT),ez={src:"/_next/static/media/chatgpt.1956a04f.png",height:153,width:150,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAmklEQVR42iWPWwrCMBBFRxD8EXy/qtWWNi2i4jqlWVm6iWYnnpsETuZmcmcmsV+IBrMhTB3U8B3GqRxCXJkWYkHyA0c4ZVNUrGBrbD2J1odYoB08OF+JDTijHc64gU4VsPN51A2epg3uUPk8Zk83pyJ1k6FNc8fUtgSH4YKhh864WCNqqs9omQ/SxBf5uQxiSaKANzR6NKRf/gF6Ro+lykesCQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},eK={src:"/_next/static/media/bot.0c800005.png",height:120,width:120,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAY1BMVEXo+f/m9/7m9/7l9/3l9v3W7PHU6vDN5uvL5Onr+//n+P/m9/7s+//r+//q+v/p+v/n+P+829682t662dy42Nu419q319q11tmz1dez1Nerz9Krz9GpztCoztCozs+ex8idx8jmiXbpAAAADHRSTlMXF76+vv39/f3+/v7UVO83AAAARElEQVR42gVAhxGAIAx86cUAChILlv2n9ACVgycxQZLmbopAsh+P0xFi2/v6VA9f76UfLWJ21+DXJohiNtYkMQnyISv8fgADftOSyBwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},eI=s(3186),eL=s(4967),eU=s.n(eL);function eV(e){let t=(0,ev.aK)(),s=t.currentSession(),a=e=>e.content&&!e.isError&&!e.streaming,r=s.messages.filter((e,t)=>e.id&&a(e)&&(t>=s.messages.length-1||a(s.messages[t+1]))),n=r.length,l=(0,ev.MG)(),[o,i]=(0,H.useState)(""),[c,m]=(0,H.useState)(new Set),d=e=>0===o.length||c.has(e),h=e=>{let t=new Set;e.length>0&&r.forEach(s=>s.content.includes(e)?t.add(s.id):null),m(t)},{startIndex:p,endIndex:u,onClickIndex:g}=function(){let[e,t]=(0,H.useState)(),[s,a]=(0,H.useState)(),[r,n]=(0,H.useState)(!1),l=s=>{r&&void 0!==e?a(s):(t(s),a(void 0))};return(0,H.useEffect)(()=>{let e=e=>{"Shift"===e.key&&n(!0)},s=e=>{"Shift"===e.key&&(n(!1),t(void 0),a(void 0))};return window.addEventListener("keyup",s),window.addEventListener("keydown",e),()=>{window.removeEventListener("keyup",s),window.removeEventListener("keydown",e)}},[]),{onClickIndex:l,startIndex:e,endIndex:s}}(),f=()=>{e.updateSelection(e=>r.forEach(t=>e.add(t.id)))};return(0,H.useEffect)(()=>{e.defaultSelectAll&&f()},[]),(0,H.useEffect)(()=>{if(void 0===p||void 0===u)return;let[t,s]=[p,u].sort((e,t)=>e-t);e.updateSelection(e=>{for(let n=t;n<=s;n+=1){var a;e.add(null!==(a=r[n].id)&&void 0!==a?a:n)}})},[p,u]),(0,D.jsxs)("div",{className:eU()["message-selector"],children:[(0,D.jsxs)("div",{className:eU()["message-filter"],children:[(0,D.jsx)("input",{type:"text",placeholder:eE.ZP.Select.Search,className:eU()["filter-item"]+" "+eU()["search-bar"],value:o,onInput:e=>{i(e.currentTarget.value),h(e.currentTarget.value)}}),(0,D.jsxs)("div",{className:eU().actions,children:[(0,D.jsx)(ej.h,{text:eE.ZP.Select.All,bordered:!0,className:eU()["filter-item"],onClick:f}),(0,D.jsx)(ej.h,{text:eE.ZP.Select.Latest,bordered:!0,className:eU()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),r.slice(n-4).forEach(t=>e.add(t.id))})}),(0,D.jsx)(ej.h,{text:eE.ZP.Select.Clear,bordered:!0,className:eU()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),(0,D.jsx)("div",{className:eU().messages,children:r.map((t,a)=>d(t.id)?(0,D.jsxs)("div",{className:"".concat(eU().message," ").concat(e.selection.has(t.id)&&eU()["message-selected"]),onClick:()=>{e.updateSelection(e=>{var s;let r=null!==(s=t.id)&&void 0!==s?s:a;e.has(r)?e.delete(r):e.add(r)}),g(a)},children:[(0,D.jsx)("div",{className:eU().avatar,children:"user"===t.role?(0,D.jsx)(eP.qE,{avatar:l.avatar}):(0,D.jsx)(eD.MaskAvatar,{mask:s.mask})}),(0,D.jsxs)("div",{className:eU().body,children:[(0,D.jsx)("div",{className:eU().date,children:new Date(t.date).toLocaleString()}),(0,D.jsx)("div",{className:"".concat(eU().content," one-line"),children:t.content})]})]},a):null)})]})}var eB=s(6394),eQ=s.n(eB),eF=s(4262),eX=s(4182);let eG=e_()(async()=>(await Promise.all([s.e(5659),s.e(7390),s.e(1829)]).then(s.bind(s,1829))).Markdown,{loadableGenerated:{webpack:()=>[1829]},loading:()=>(0,D.jsx)(X.Z,{})});function eY(e){return(0,D.jsx)("div",{className:"modal-mask",children:(0,D.jsx)(eN.u_,{title:eE.ZP.Export.Title,onClose:e.onClose,children:(0,D.jsx)("div",{style:{minHeight:"40vh"},children:(0,D.jsx)(eJ,{})})})})}function eq(e){let t=e.steps,s=t.length;return(0,D.jsxs)("div",{className:eR().steps,children:[(0,D.jsx)("div",{className:eR()["steps-progress"],children:(0,D.jsx)("div",{className:eR()["steps-progress-inner"],style:{width:"".concat((e.index+1)/s*100,"%")}})}),(0,D.jsx)("div",{className:eR()["steps-inner"],children:t.map((t,s)=>(0,D.jsxs)("div",{className:"".concat(eR().step," ").concat(eR()[s<=e.index?"step-finished":""]," ").concat(s===e.index&&eR()["step-current"]," clickable"),onClick:()=>{var t;null===(t=e.onStepChange)||void 0===t||t.call(e,s)},role:"button",children:[(0,D.jsx)("span",{className:eR()["step-index"],children:s+1}),(0,D.jsx)("span",{className:eR()["step-name"],children:t.name})]},s))})]})}function eJ(){let e=[{name:eE.ZP.Export.Steps.Select,value:"select"},{name:eE.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:s,currentStepIndex:a}=function(e){let t=e.length,[s,a]=(0,H.useState)(0),r=()=>a((s+1)%t),n=()=>a((s-1+t)%t);return{currentStepIndex:s,setCurrentStepIndex:a,nextStep:r,prevStep:n,currentStep:e[s]}}(e),[r,n]=(0,H.useState)({format:"image",includeContext:!0});function l(e){let t={...r};e(t),n(t)}let o=(0,ev.aK)(),i=o.currentSession(),{selection:c,updateSelection:m}=function(){let[e,t]=(0,H.useState)(new Set),s=s=>{let a=new Set(e);s(a),t(a)};return{selection:e,updateSelection:s}}(),d=(0,H.useMemo)(()=>{var e;let t=[];return r.includeContext&&t.push(...i.mask.context),t.push(...i.messages.filter((t,s)=>c.has(null!==(e=t.id)&&void 0!==e?e:s))),t},[r.includeContext,i.messages,i.mask.context,c]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(eq,{steps:e,index:a,onStepChange:s}),(0,D.jsxs)("div",{className:eR()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,D.jsxs)(eN.aV,{children:[(0,D.jsx)(eN.HC,{title:eE.ZP.Export.Format.Title,subTitle:eE.ZP.Export.Format.SubTitle,children:(0,D.jsx)(eN.Ph,{value:r.format,onChange:e=>l(t=>t.format=e.currentTarget.value),children:["text","image"].map(e=>(0,D.jsx)("option",{value:e,children:e},e))})}),(0,D.jsx)(eN.HC,{title:eE.ZP.Export.IncludeContext.Title,subTitle:eE.ZP.Export.IncludeContext.SubTitle,children:(0,D.jsx)("input",{type:"checkbox",checked:r.includeContext,onChange:e=>{l(t=>t.includeContext=e.currentTarget.checked)}})})]}),(0,D.jsx)(eV,{selection:c,updateSelection:m,defaultSelectAll:!0})]}),"preview"===t.value&&(0,D.jsx)("div",{className:eR()["message-exporter-body"],children:"text"===r.format?(0,D.jsx)(e6,{messages:d,topic:i.topic}):(0,D.jsx)(e1,{messages:d,topic:i.topic})})]})}function e$(e){let t=(0,H.useRef)(null);return(0,H.useEffect)(()=>{if(!t.current)return;let s=t.current,a=Array.from(s.getElementsByClassName(eA.yY));if(a.length!==e.messages.length)return;let r=a.map(e=>{let[t,s]=e.id.split(":");return{role:s,content:e.innerHTML,date:""}});e.onRender(r)}),(0,D.jsx)("div",{ref:t,children:e.messages.map((e,t)=>(0,D.jsx)("div",{id:"".concat(e.role,":").concat(t),className:eA.yY,children:(0,D.jsx)(eG,{content:e.content,defaultShow:!0})},t))})}function e3(e){var t;let[s,a]=(0,H.useState)(!1),[r,n]=(0,H.useState)(!1),l=e=>{n(!1),eX.hi.share(e).then(e=>{e&&((0,ex.vQ)(e),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,eN.CF)((0,eW.B)(e))}).finally(()=>a(!1))},o=async()=>{var t;(null===(t=e.messages)||void 0===t?void 0:t.length)&&(a(!0),n(!0))};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:eR()["preview-actions"],children:[e.showCopy&&(0,D.jsx)(ej.h,{text:eE.ZP.Export.Copy,bordered:!0,shadow:!0,icon:(0,D.jsx)(F.Z,{}),onClick:e.copy}),(0,D.jsx)(ej.h,{text:eE.ZP.Export.Download,bordered:!0,shadow:!0,icon:(0,D.jsx)(eI.Z,{}),onClick:e.download}),(0,D.jsx)(ej.h,{text:eE.ZP.Export.Share,bordered:!0,shadow:!0,icon:s?(0,D.jsx)(X.Z,{}):(0,D.jsx)(V,{}),onClick:o})]}),(0,D.jsx)("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:r&&(0,D.jsx)(e$,{messages:null!==(t=e.messages)&&void 0!==t?t:[],onRender:l})})]})}function e0(e){return e.avatar===eZ._G?(0,D.jsx)(eQ(),{src:eK.src,width:30,height:30,alt:"bot",className:"user-avatar"}):(0,D.jsx)(eP.qE,{avatar:e.avatar})}function e1(e){var t,s;let a=(0,ev.aK)(),r=a.currentSession(),n=r.mask,l=(0,ev.MG)(),o=(0,H.useRef)(null),i=()=>{let e=o.current;e&&(0,eF.SE)(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,eN.CF)(eE.ZP.Copy.Success)})}catch(e){console.error("[Copy Image] ",e),(0,eN.CF)(eE.ZP.Copy.Failed)}})},c=(0,ex.S0)(),m=()=>{let t=o.current;t&&(0,eF.YM)(t).then(t=>{if(t){if(c){let e=new Image;e.src=t;let s=window.open("");null==s||s.document.write(e.outerHTML)}else{let s=document.createElement("a");s.download="".concat(e.topic,".png"),s.href=t,s.click()}}}).catch(e=>console.log("[Export Image] ",e))};return(0,D.jsxs)("div",{className:eR()["image-previewer"],children:[(0,D.jsx)(e3,{copy:i,download:m,showCopy:!c,messages:e.messages}),(0,D.jsxs)("div",{className:"".concat(eR()["preview-body"]," ").concat(eR()["default-theme"]),ref:o,children:[(0,D.jsxs)("div",{className:eR()["chat-info"],children:[(0,D.jsx)("div",{className:eR().logo+" no-dark",children:(0,D.jsx)(eQ(),{src:ez.src,alt:"logo",width:50,height:50})}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:eR()["main-title"],children:"ChatGPT Next Web"}),(0,D.jsx)("div",{className:eR()["sub-title"],children:"github.com/Yidadaa/ChatGPT-Next-Web"}),(0,D.jsxs)("div",{className:eR().icons,children:[(0,D.jsx)(e0,{avatar:l.avatar}),(0,D.jsx)("span",{className:eR()["icon-space"],children:"&"}),(0,D.jsx)(e0,{avatar:n.avatar})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:eR()["chat-info-item"],children:["Model: ",n.modelConfig.model]}),(0,D.jsxs)("div",{className:eR()["chat-info-item"],children:["Messages: ",e.messages.length]}),(0,D.jsxs)("div",{className:eR()["chat-info-item"],children:["Topic: ",r.topic]}),(0,D.jsxs)("div",{className:eR()["chat-info-item"],children:["Time:"," ",new Date(null!==(s=null===(t=e.messages.at(-1))||void 0===t?void 0:t.date)&&void 0!==s?s:Date.now()).toLocaleString()]})]})]}),e.messages.map((e,t)=>(0,D.jsxs)("div",{className:eR().message+" "+eR()["message-"+e.role],children:[(0,D.jsx)("div",{className:eR().avatar,children:(0,D.jsx)(e0,{avatar:"user"===e.role?l.avatar:n.avatar})}),(0,D.jsx)("div",{className:eR().body,children:(0,D.jsx)(eG,{content:e.content,fontSize:l.fontSize,defaultShow:!0})})]},t))]})]})}function e6(e){let t="# ".concat(e.topic,"\n\n")+e.messages.map(e=>"user"===e.role?"## ".concat(eE.ZP.Export.MessageFromYou,":\n").concat(e.content):"## ".concat(eE.ZP.Export.MessageFromChatGPT,":\n").concat(e.content.trim())).join("\n\n"),s=()=>{(0,ex.vQ)(t)},a=()=>{(0,ex.CP)(t,"".concat(e.topic,".md"))};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(e3,{copy:s,download:a,messages:e.messages}),(0,D.jsx)("div",{className:"markdown-body",children:(0,D.jsx)("pre",{className:eR()["export-content"],children:t})})]})}let e2=e_()(async()=>(await Promise.all([s.e(5659),s.e(7390),s.e(1829)]).then(s.bind(s,1829))).Markdown,{loadableGenerated:{webpack:()=>[1829]},loading:()=>(0,D.jsx)(X.Z,{})});function e4(e){let t=(0,ev.aK)(),s=t.currentSession(),a=(0,eZ.Zy)(),r=(0,eO.s0)();return(0,D.jsx)("div",{className:"modal-mask",children:(0,D.jsx)(eN.u_,{title:eE.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[(0,D.jsx)(ej.h,{icon:(0,D.jsx)(es.Z,{}),bordered:!0,text:eE.ZP.Chat.Config.Reset,onClick:()=>{confirm(eE.ZP.Memory.ResetConfirm)&&t.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),(0,D.jsx)(ej.h,{icon:(0,D.jsx)(F.Z,{}),bordered:!0,text:eE.ZP.Chat.Config.SaveAs,onClick:()=>{r(eA.y$.Masks),setTimeout(()=>{a.create(s.mask)},500)}},"copy")],children:(0,D.jsx)(eD.MaskConfig,{mask:s.mask,updateMask:e=>{let a={...s.mask};e(a),t.updateCurrentSession(e=>e.mask=a)},shouldSyncFromGlobal:!0,extraListItems:s.mask.modelConfig.sendMemory?(0,D.jsx)(eN.HC,{title:"".concat(eE.ZP.Memory.Title," (").concat(s.lastSummarizeIndex," of ").concat(s.messages.length,")"),subTitle:s.memoryPrompt||eE.ZP.Memory.EmptyContent}):(0,D.jsx)(D.Fragment,{})})})})}function e7(e){let t=(0,ev.aK)(),s=t.currentSession(),a=s.mask.context;return(0,D.jsxs)("div",{className:eS()["prompt-toast"],children:[e.showToast&&(0,D.jsxs)("div",{className:eS()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:[(0,D.jsx)(K,{}),(0,D.jsx)("span",{className:eS()["prompt-toast-content"],children:eE.ZP.Context.Toast(a.length)})]}),e.showModal&&(0,D.jsx)(e4,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function e8(e){let t=0===e.prompts.length,[s,a]=(0,H.useState)(0),r=(0,H.useRef)(null);return((0,H.useEffect)(()=>{a(0)},[e.prompts.length]),(0,H.useEffect)(()=>{let n=n=>{if(t||n.metaKey||n.altKey||n.ctrlKey)return;let l=t=>{var l;n.stopPropagation(),n.preventDefault();let o=Math.max(0,Math.min(e.prompts.length-1,s+t));a(o),null===(l=r.current)||void 0===l||l.scrollIntoView({block:"center"})};if("ArrowUp"===n.key)l(1);else if("ArrowDown"===n.key)l(-1);else if("Enter"===n.key){let t=e.prompts.at(s);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e.prompts.length,s]),t)?null:(0,D.jsx)("div",{className:eC()["prompt-hints"],children:e.prompts.map((t,n)=>(0,D.jsxs)("div",{ref:n===s?r:null,className:eC()["prompt-hint"]+" ".concat(n===s?eC()["prompt-hint-selected"]:""),onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>a(n),children:[(0,D.jsx)("div",{className:eC()["hint-title"],children:t.title}),(0,D.jsx)("div",{className:eC()["hint-content"],children:t.content})]},t.title+n.toString()))})}function e9(){let e=(0,ev.aK)();return(0,D.jsxs)("div",{className:eS()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=void 0),children:[(0,D.jsx)("div",{className:eS()["clear-context-tips"],children:eE.ZP.Context.Clear}),(0,D.jsx)("div",{className:eS()["clear-context-revert-btn"],children:eE.ZP.Context.Revert})]})}function e5(e){let t=(0,ev.MG)(),s=(0,eO.s0)(),a=(0,ev.aK)(),r=t.theme,n=ey.L.hasPending(),l=()=>ey.L.stopAll();return(0,D.jsxs)("div",{className:eS()["chat-input-actions"],children:[n&&(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:l,children:(0,D.jsx)(ef,{})}),!e.hitBottom&&(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:e.scrollToBottom,children:(0,D.jsx)(eu,{})}),e.hitBottom&&(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:e.showPromptModal,children:(0,D.jsx)(el,{})}),(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:function(){let e=[ev.Q2.Auto,ev.Q2.Light,ev.Q2.Dark],s=e.indexOf(r),a=(s+1)%e.length,n=e[a];t.update(e=>e.theme=n)},children:r===ev.Q2.Auto?(0,D.jsx)(eh,{}):r===ev.Q2.Light?(0,D.jsx)(ei,{}):r===ev.Q2.Dark?(0,D.jsx)(em,{}):null}),(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:e.showPromptHints,children:(0,D.jsx)(Y,{})}),(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:()=>{s(eA.y$.Masks)},children:(0,D.jsx)(q.Z,{})}),(0,D.jsx)("div",{className:"".concat(eS()["chat-input-action"]," clickable"),onClick:()=>{a.updateCurrentSession(e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})},children:(0,D.jsx)(er,{})})]})}function te(){var e,t;let s=(0,ev.aK)(),[a,r]=(0,ev.aK)(e=>[e.currentSession(),e.currentSessionIndex]),n=(0,ev.MG)(),l=n.fontSize,[o,i]=(0,H.useState)(!1),c=(0,H.useRef)(null),[m,d]=(0,H.useState)(""),[h,p]=(0,H.useState)(!1),{submitKey:u,shouldSubmit:g}=function(){let e=(0,ev.MG)(),t=e.submitKey;return{submitKey:t,shouldSubmit:t=>"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing)&&(e.submitKey===ev.mQ.AltEnter&&t.altKey||e.submitKey===ev.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===ev.mQ.ShiftEnter&&t.shiftKey||e.submitKey===ev.mQ.MetaEnter&&t.metaKey||e.submitKey===ev.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),{scrollRef:f,setAutoScroll:v,scrollToBottom:x}=function(){let e=(0,H.useRef)(null),[t,s]=(0,H.useState)(!0),a=()=>{let t=e.current;t&&setTimeout(()=>t.scrollTop=t.scrollHeight,1)};return(0,H.useLayoutEffect)(()=>{t&&a()}),{scrollRef:e,autoScroll:t,setAutoScroll:s,scrollToBottom:a}}(),[k,_]=(0,H.useState)(!0),y=(0,ex.S0)(),w=(0,eO.s0)(),E=e=>{let t=e.scrollTop+e.clientHeight>=e.scrollHeight-100;_(t)},j=(0,ew.f)(),[b,C]=(0,H.useState)([]),M=(0,Z.y1)(e=>{C(j.search(e))},100,{leading:!0,trailing:!0}),S=e=>{var t;C([]),null===(t=c.current)||void 0===t||t.focus(),setTimeout(()=>d(e.content),60)},[N,O]=(0,H.useState)(2),A=(0,Z.y1)(()=>{let e=c.current?(0,ex.lx)(c.current):1,t=Math.min(20,Math.max(2+Number(!y),e));O(t)},100,{leading:!0,trailing:!0});(0,H.useEffect)(A,[m]);let P=e=>{d(e);let t=e.trim().length;0===t?C([]):!n.disablePromptHint&&t<30&&e.startsWith("/")&&M(e.slice(1))},W=e=>{var t;""!==e.trim()&&(p(!0),s.onUserInput(e).then(()=>p(!1)),localStorage.setItem(eA.Sb,e),d(""),C([]),y||null===(t=c.current)||void 0===t||t.focus(),v(!0))},T=e=>{ey.L.stop(r,e)};(0,H.useEffect)(()=>{s.updateCurrentSession(e=>{let t=Date.now()-eA.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,eW.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...n.modelConfig})})},[]);let z=e=>{if("ArrowUp"===e.key&&m.length<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){var t;d(null!==(t=localStorage.getItem(eA.Sb))&&void 0!==t?t:""),e.preventDefault();return}g(e)&&0===b.length&&(W(m),e.preventDefault())},K=(e,t)=>{(0,ex.Ri)(e.currentTarget,t.content)&&e.preventDefault()},I=e=>{let t=null;for(let s=0;s<a.messages.length;s+=1){let r=a.messages[s];if(r.id===e)break;"user"===r.role&&(t=s)}return t},U=e=>{s.updateCurrentSession(t=>t.messages.splice(e,2))},B=e=>{let t=I(e);null!==t&&U(t)},F=e=>{var t;let r=I(e);if(null===r)return;p(!0);let n=a.messages[r].content;U(r),s.onUserInput(n).then(()=>p(!1)),null===(t=c.current)||void 0===t||t.focus()},X=a.mask.hideContext?[]:a.mask.context.slice(),G=(0,ev._X)();if(0===X.length&&(null===(e=a.messages.at(0))||void 0===e?void 0:e.content)!==ev.ux.content){let e=Object.assign({},ev.ux);G.isAuthorized()||(e.content=eE.ZP.Error.Unauthorized),X.push(e)}let Y=(null!==(t=a.clearContextIndex)&&void 0!==t?t:-1)>=0?a.clearContextIndex+X.length:-1,q=X.concat(a.messages).concat(h?[{...(0,ev.tn)({role:"assistant",content:"……"}),preview:!0}]:[]).concat(m.length>0&&n.sendPreviewBubble?[{...(0,ev.tn)({role:"user",content:m}),preview:!0}]:[]),[J,ee]=(0,H.useState)(!1),es=()=>{let e=prompt(eE.ZP.Chat.Rename,a.topic);e&&e!==a.topic&&s.updateCurrentSession(t=>t.topic=e)},ea=(0,eO.TH)(),er=ea.pathname===eA.y$.Chat;return(0,eH.Y)({fill:d,submit:e=>{W(e)}}),(0,D.jsxs)("div",{className:eC().chat,children:[(0,D.jsxs)("div",{className:"window-header",children:[(0,D.jsxs)("div",{className:"window-header-title",children:[(0,D.jsx)("div",{className:'window-header-main-title " '.concat(eC()["chat-body-title"]),onClickCapture:es,children:a.topic?a.topic:ev.HX}),(0,D.jsx)("div",{className:"window-header-sub-title",children:eE.ZP.Chat.SubTitle(a.messages.length)})]}),(0,D.jsxs)("div",{className:"window-actions",children:[(0,D.jsx)("div",{className:"window-action-button "+eC().mobile,children:(0,D.jsx)(ej.h,{icon:(0,D.jsx)(Q,{}),bordered:!0,title:eE.ZP.Chat.Actions.ChatList,onClick:()=>w(eA.y$.Home)})}),(0,D.jsx)("div",{className:"window-action-button",children:(0,D.jsx)(ej.h,{icon:(0,D.jsx)(L,{}),bordered:!0,onClick:es})}),(0,D.jsx)("div",{className:"window-action-button",children:(0,D.jsx)(ej.h,{icon:(0,D.jsx)(V,{}),bordered:!0,title:eE.ZP.Chat.Actions.Export,onClick:()=>{i(!0)}})}),!y&&(0,D.jsx)("div",{className:"window-action-button",children:(0,D.jsx)(ej.h,{icon:n.tightBorder?(0,D.jsx)(et,{}):(0,D.jsx)($,{}),bordered:!0,onClick:()=>{n.update(e=>e.tightBorder=!e.tightBorder)}})})]}),(0,D.jsx)(e7,{showToast:!k,showModal:J,setShowModal:ee})]}),(0,D.jsx)("div",{className:eC()["chat-body"],ref:f,onScroll:e=>E(e.currentTarget),onMouseDown:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.blur()},onWheel:e=>v(k&&e.deltaY>0),onTouchStart:()=>{var e;null===(e=c.current)||void 0===e||e.blur(),v(!1)},children:q.map((e,t)=>{var s,r,o;let i="user"===e.role,c=!i&&t>0&&!(e.preview||0===e.content.length),m=e.preview||e.streaming;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:i?eC()["chat-message-user"]:eC()["chat-message"],children:(0,D.jsxs)("div",{className:eC()["chat-message-container"],children:[(0,D.jsx)("div",{className:eC()["chat-message-avatar"],children:"user"===e.role?(0,D.jsx)(eP.qE,{avatar:n.avatar}):(0,D.jsx)(eD.MaskAvatar,{mask:a.mask})}),m&&(0,D.jsx)("div",{className:eC()["chat-message-status"],children:eE.ZP.Chat.Typing}),(0,D.jsxs)("div",{className:eC()["chat-message-item"],children:[c&&(0,D.jsxs)("div",{className:eC()["chat-message-top-actions"],children:[e.streaming?(0,D.jsx)("div",{className:eC()["chat-message-top-action"],onClick:()=>T(null!==(s=e.id)&&void 0!==s?s:t),children:eE.ZP.Chat.Actions.Stop}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:eC()["chat-message-top-action"],onClick:()=>B(null!==(r=e.id)&&void 0!==r?r:t),children:eE.ZP.Chat.Actions.Delete}),(0,D.jsx)("div",{className:eC()["chat-message-top-action"],onClick:()=>F(null!==(o=e.id)&&void 0!==o?o:t),children:eE.ZP.Chat.Actions.Retry})]}),(0,D.jsx)("div",{className:eC()["chat-message-top-action"],onClick:()=>(0,ex.vQ)(e.content),children:eE.ZP.Chat.Actions.Copy})]}),(0,D.jsx)(e2,{content:e.content,loading:(e.preview||0===e.content.length)&&!i,onContextMenu:t=>K(t,e),onDoubleClickCapture:()=>{y&&d(e.content)},fontSize:l,parentRef:f,defaultShow:t>=q.length-10})]}),!i&&!e.preview&&(0,D.jsx)("div",{className:eC()["chat-message-actions"],children:(0,D.jsx)("div",{className:eC()["chat-message-action-date"],children:e.date.toLocaleString()})})]})},t),t===Y-1&&(0,D.jsx)(e9,{})]})})}),(0,D.jsxs)("div",{className:eC()["chat-input-panel"],children:[(0,D.jsx)(e8,{prompts:b,onPromptSelect:S}),(0,D.jsx)(e5,{showPromptModal:()=>ee(!0),scrollToBottom:x,hitBottom:k,showPromptHints:()=>{var e;if(b.length>0){C([]);return}null===(e=c.current)||void 0===e||e.focus(),d("/"),M("")}}),(0,D.jsxs)("div",{className:eC()["chat-input-panel-inner"],children:[(0,D.jsx)("textarea",{ref:c,className:eC()["chat-input"],placeholder:eE.ZP.Chat.Input(u),onInput:e=>P(e.currentTarget.value),value:m,onKeyDown:z,onFocus:()=>v(!0),onBlur:()=>v(!1),rows:N,autoFocus:!y||er}),(0,D.jsx)(ej.h,{icon:(0,D.jsx)(R,{}),text:eE.ZP.Chat.Send,className:eC()["chat-input-send"],type:"primary",onClick:()=>W(m)})]})]}),o&&(0,D.jsx)(eY,{onClose:()=>i(!1)})]},a.id)}},7598:function(e,t,s){"use strict";s.d(t,{f:function(){return c},o:function(){return i}});var a=s(2561),r=s(4475),n=s(184),l=s(5262),o=s(6819);let i={ready:!1,builtinEngine:new n.Z([],{keys:["title"]}),userEngine:new n.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),s=this.builtinEngine.search(e);return t.concat(s).map(e=>e.item)}},c=(0,a.Ue)()((0,r.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(s){let a=t().prompts;return s.id=t().latestId+1,s.isUser=!0,a[s.id]=s,e(()=>({latestId:s.id,prompts:a})),s.id},get(e){let s=t().prompts[e];return s||i.builtinPrompts.find(t=>t.id===e)},remove(s){let a=t().prompts;delete a[s],i.remove(s),e(()=>({prompts:a,counter:t().counter+1}))},getUserPrompts(){var e;let s=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return s.sort((e,t)=>t.id&&e.id?t.id-e.id:0),s},update(s,a){var r;let n=null!==(r=t().prompts[s])&&void 0!==r?r:{title:"",content:"",id:s};i.remove(s),a(n);let l=t().prompts;l[s]=n,e(()=>({prompts:l})),i.add(n)},search:e=>0===e.length?i.allPrompts.concat([...t().getUserPrompts()]):i.search(e)}),{name:o.KJ.Prompt,version:1,onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let s=[e.en,e.cn];"cn"===(0,l.VQ)()&&(s=s.reverse());let a=s.map(e=>e.map(e=>{let[t,s]=e;return{id:Math.random(),title:t,content:s}})),r=null!==(t=c.getState().getUserPrompts())&&void 0!==t?t:[],n=a.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);i.count.builtin=e.en.length+e.cn.length,i.init(n,r)})}}))},4956:function(e){e.exports={"message-exporter-body":"exporter_message-exporter-body__6ryPM","export-content":"exporter_export-content__VFCQu",steps:"exporter_steps__74B3Y","steps-progress":"exporter_steps-progress__EyM_r","steps-progress-inner":"exporter_steps-progress-inner__oz3Hb","steps-inner":"exporter_steps-inner__s_Orm",step:"exporter_step__XQ8Sl","step-finished":"exporter_step-finished__MR2rf","step-current":"exporter_step-current__aE_3W","step-index":"exporter_step-index__2TGGC","step-name":"exporter_step-name__DqtaD","preview-actions":"exporter_preview-actions__VwJjx","image-previewer":"exporter_image-previewer__Bau5o","preview-body":"exporter_preview-body__4Unb_","chat-info":"exporter_chat-info__ADuEN",icons:"exporter_icons__xW4Ng",logo:"exporter_logo__1T3_q","main-title":"exporter_main-title__vJEUr","sub-title":"exporter_sub-title__rL__V","icon-space":"exporter_icon-space__Mrx3S","chat-info-item":"exporter_chat-info-item__cGqZM",message:"exporter_message__wuiyn",avatar:"exporter_avatar__wJVTp",body:"exporter_body__A7j5x","message-assistant":"exporter_message-assistant__VfAh9","message-user":"exporter_message-user__dSc3c"}},4967:function(e){e.exports={"message-selector":"message-selector_message-selector__G8lGj","message-filter":"message-selector_message-filter__mUM5q","search-bar":"message-selector_search-bar__wf1_L",actions:"message-selector_actions__SaSk9",messages:"message-selector_messages__FgdUP",message:"message-selector_message__PhVIQ","message-selected":"message-selector_message-selected__ssDR5",avatar:"message-selector_avatar__WX5qi",body:"message-selector_body__wAxdw",date:"message-selector_date__Y2tOk",content:"message-selector_content__SIwBQ"}}}]);